{% extends "recipes/base.html" %}
{% block content %}
<div class="receipt-container">
  <div class="receipt-header">
    FRY ME TO THE MOON — NEW RECIPE
    <div class="receipt-meta">Order #2025-REC</div>
  </div>

  <div class="receipt-body">
    <form method="post" enctype="multipart/form-data">
      {% csrf_token %}
      {{ form.non_field_errors }}

      <p>
        <label class="receipt-title-label" for="{{ form.title.id_for_label }}">Title</label><br>
        {{ form.title }}
        {% if form.title.errors %}
          <span class="validation-message">{{ form.title.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.description.id_for_label }}">Description</label><br>
        {{ form.description }}
        {% if form.description.errors %}
          <span class="validation-message">{{ form.description.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.ingredients.id_for_label }}">Ingredients</label><br>
        {{ form.ingredients }}
        {% if form.ingredients.errors %}
          <span class="validation-message">{{ form.ingredients.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.steps.id_for_label }}">Instructions</label><br>
        {{ form.steps }}
        {% if form.steps.errors %}
          <span class="validation-message">{{ form.steps.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.image.id_for_label }}">Image</label><br>
        {{ form.image }}
        {% if form.image.errors %}
          <span class="validation-message">{{ form.image.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.category.id_for_label }}">Category</label><br>
        {{ form.category }}
        {% if form.category.errors %}
          <span class="validation-message">{{ form.category.errors }}</span>
        {% endif %}
      </p>

      <p>
        <label class="receipt-title-label" for="{{ form.cook_time_minutes.id_for_label }}">Cook Time (minutes)</label><br>
        {{ form.cook_time_minutes }}
        {% if form.cook_time_minutes.errors %}
          <span class="validation-message">{{ form.cook_time_minutes.errors }}</span>
        {% endif %}
      </p>

      <div class="receipt-footer">
        <button type="submit" class="btn-register">Save Recipe</button>
        <a href="{% url 'recipe_list' %}" class="btn-cancel">Cancel</a>
      </div>
    </form>
  </div>
</div>

{% if recipe_success %}
  <!-- Popup overlay -->
  <div class="receipt-popup">
    <div class="receipt-popup-card">
      <p class="signature-text">Recipe Submitted</p>
      <p class="popup-subtext">Redirecting to recipe list…</p>
    </div>
  </div>
  <script>
    setTimeout(function () {
      window.location.href = "{% url 'recipe_list' %}";
    }, 3000);
  </script>
{% endif %}
{% endblock %}
